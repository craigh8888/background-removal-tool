(()=>{var t={793:(t,e)=>{e.Nw=function(t,e){return Object.assign(document.createElement("canvas"),{width:t,height:e})},e.yt=function(t,e){return new Promise((function(n,a){const o=Object.assign(document.createElement("img"),e);function d(){o.onload=null,o.onerror=null}o.onload=function(){d(),n(o)},o.onerror=function(){d(),a(new Error('Failed to load the image "'+t+'"'))},o.src=t}))}}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var d=e[a]={exports:{}};return t[a](d,d.exports,n),d.exports}(()=>{"use strict";var t=n(793);let e=null,a=null,o=null,d=null;function r(t){let e,n,a,o=t[0]/255,d=t[1]/255,r=t[2]/255;return o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,e=(.4124*o+.3576*d+.1805*r)/.95047,n=(.2126*o+.7152*d+.0722*r)/1,a=(.0193*o+.1192*d+.9505*r)/1.08883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,[116*n-16,500*(e-n),200*(n-a)]}document.getElementById("fileInput").addEventListener("change",(async function(n){const r=n.target.files[0],l=new FileReader;l.onload=function(n){(0,t.yt)(n.target.result).then((r=>{a=(0,t.Nw)(r.width,r.height),o=a.getContext("2d"),o.drawImage(r,0,0),e=o.getImageData(0,0,a.width,a.height),d=new Uint8ClampedArray(e.data),document.getElementById("beforeImage").src=n.target.result,document.getElementById("processButton").disabled=!1,document.getElementById("downloadButton").disabled=!0}))},l.readAsDataURL(r)})),document.getElementById("processButton").addEventListener("click",(function(){if(!a||!o||!d)return;const t=function(t){let e;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return e=t.substring(1).split(""),3==e.length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),e="0x"+e.join(""),{r:e>>16&255,g:e>>8&255,b:255&e,a:1};throw new Error("Bad Hex")}(document.getElementById("colorSelect").value);e.data.set(d),function(t,e=1){const n=new ImageData(t.width,t.height),a=2*e+1,o=new Array(a*a).fill(1/(a*a));for(let a=0;a<t.height;a++)for(let d=0;d<t.width;d++){let r=0,l=0,i=0,c=0;for(let n=-e;n<=e;n++)for(let u=-e;u<=e;u++){let e=d+u,s=a+n;if(e>=0&&e<t.width&&s>=0&&s<t.height){let n=4*(s*t.width+e);r+=t.data[n]*o[c],l+=t.data[n+1]*o[c],i+=t.data[n+2]*o[c]}c++}let u=4*(a*t.width+d);n.data[u]=r,n.data[u+1]=l,n.data[u+2]=i,n.data[u+3]=t.data[u+3]}t.data.set(n.data)}(e,1);for(let a=0;a<e.data.length;a+=4)n=r(e.data.slice(a,a+3)),l=r([t.r,t.g,t.b]),Math.sqrt(Math.pow(n[0]-l[0],2)+Math.pow(n[1]-l[1],2)+Math.pow(n[2]-l[2],2))<10&&(e.data[a+3]=0);var n,l;o.putImageData(e,0,0),document.getElementById("afterImage").src=a.toDataURL("image/png"),this.disabled=!0,document.getElementById("downloadButton").disabled=!1})),document.getElementById("downloadButton").addEventListener("click",(function(){if(!a)return;const t=document.createElement("a");t.download="transparent-image.png",t.href=document.getElementById("afterImage").src,t.click()})),document.getElementById("processButton").disabled=!0,document.getElementById("downloadButton").disabled=!0,document.getElementById("colorSelect").addEventListener("change",(function(){console.log("Color changed to",this.value)}))})()})();